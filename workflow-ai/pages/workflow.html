<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Protection contre l'indexation - Document confidentiel -->
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <meta name="googlebot" content="noindex, nofollow, noarchive, nosnippet">
    <meta name="bingbot" content="noindex, nofollow, noarchive">
    <title>Sage Workflow.AI - Automatisation RH</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/workflow.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <div class="logo">
                    <!-- Sage Logo SVG -->
                    <svg viewBox="0 0 250 141" class="logo-sage-svg" role="img" aria-label="Logo Sage" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <title>Sage</title>
                        <path d="M27.6269 0C43.2682 0 55.9863 10.8171 56.2793 25.8724C56.4258 30.1107 53.3561 32.4512 49.9935 32.4512C46.7773 32.4512 44.0006 30.1139 43.8542 26.1654C43.7077 17.6855 36.5462 11.3997 27.4805 11.3997C19.0006 11.3997 12.5716 17.3926 12.5716 25.5794C12.5716 34.4954 18.5645 38.444 30.9896 42.9753C44.2904 47.7995 56.4258 53.4993 56.4258 70.4557C56.4258 85.2213 44.8763 97.0605 28.7988 97.0605C13.0111 97.0605 0 85.9505 0 70.8952C0 61.5397 4.53125 54.9609 8.91602 54.9609C12.7181 54.9609 15.0553 57.4447 15.0553 60.8073C15.0553 63.7305 12.5716 65.0456 12.5716 70.3092C12.5716 79.6647 20.1725 85.6576 28.7988 85.6576C37.8613 85.6576 43.8542 79.3717 43.8542 71.7708C43.8542 62.4154 37.8613 58.4701 25.4362 54.082C11.5495 49.1178 0 43.1217 0 26.6048C0 11.696 11.9857 0 27.6269 0Z" fill="#00D639"></path>
                        <path d="M91.4225 97.0636C75.6348 97.0636 62.4805 84.3455 62.4805 68.2648C62.4805 51.6014 75.7813 39.1763 91.862 39.1763C109.111 39.1763 121.243 52.0409 121.243 69.5832V90.9243C121.243 94.5799 118.32 97.0636 114.958 97.0636C111.449 97.0636 108.525 94.5799 108.525 90.9243V70.0194C108.525 58.4699 101.947 50.576 91.569 50.576C82.36 50.576 75.0521 58.3234 75.0521 68.2648C75.0521 77.4738 82.2135 85.3677 91.2793 85.3677C94.6419 85.3677 96.1035 84.492 98.151 84.492C100.928 84.492 103.851 86.8293 103.851 90.1919C103.848 94.7231 98.4375 97.0636 91.4225 97.0636Z" fill="#00D639"></path>
                        <path d="M157.262 140.625C140.889 140.625 127.295 128.929 127.295 113.727C127.295 108.61 130.218 106.273 133.581 106.273C136.943 106.273 139.72 108.467 139.867 112.705C140.013 122.207 147.614 129.222 157.116 129.222C167.204 129.222 173.779 122.79 173.779 114.456C173.779 104.954 166.471 101.009 154.046 97.0604C139.574 92.3826 127.295 85.9504 127.295 68.1183C127.295 51.7446 139.867 39.1763 156.237 39.1763C172.754 39.1763 186.351 51.1619 186.351 66.9497C186.351 76.5981 182.406 84.0526 176.995 84.0526C173.34 84.0526 170.856 81.4224 170.856 78.2062C170.856 74.8436 173.779 73.382 173.779 67.3892C173.779 57.3013 165.885 50.5793 156.383 50.5793C147.174 50.5793 139.867 57.5975 139.867 66.8065C139.867 77.1841 147.321 81.5721 159.6 85.6639C173.779 90.3416 186.351 96.188 186.351 113.291C186.351 128.639 174.219 140.625 157.262 140.625Z" fill="#00D639"></path>
                        <path d="M222.227 97.0638C205.853 97.0638 192.406 84.1992 192.406 68.1218C192.406 52.041 205.417 39.1797 221.494 39.1797C237.722 39.1797 250 50.4362 250 64.7624C250 70.3158 246.055 73.6784 239.623 73.6784H222.813C219.45 73.6784 216.966 71.3411 216.966 68.2682C216.966 65.345 219.45 63.0046 222.813 63.0046H235.384C236.553 63.0046 237.432 62.4186 237.432 61.25C237.432 57.0117 232.022 50.4329 221.937 50.4329C212.582 50.4329 204.981 58.4733 204.981 68.1218C204.981 77.9167 212.728 85.6641 222.376 85.6641C233.487 85.6641 237.142 79.0853 241.673 79.0853C245.475 79.0853 247.52 81.569 247.52 84.349C247.52 86.9792 245.765 89.3197 241.38 92.0964C236.989 94.8698 230.414 97.0638 222.227 97.0638Z" fill="#00D639"></path>
                    </svg>
                    <span class="logo-ai"><span class="ai-gradient">AI Studio</span></span>
                </div>
                <button class="collapse-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m15 18-6-6 6-6"/>
                    </svg>
                </button>
            </div>
            <div class="header-center">
                <div class="builder-dropdown" id="appSwitcher">
                    <!-- Workflow icon (Lucide) -->
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect width="8" height="8" x="3" y="3" rx="2"/>
                        <path d="M7 11v4a2 2 0 0 0 2 2h4"/>
                        <rect width="8" height="8" x="13" y="13" rx="2"/>
                    </svg>
                    <span class="builder-text">Sage <span class="ai-gradient">Workflow.AI</span></span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m7 15 5 5 5-5"/>
                        <path d="m7 9 5-5 5 5"/>
                    </svg>

                    <!-- Dropdown Menu -->
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="../index.html" class="dropdown-item">
                            <div class="dropdown-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect width="7" height="7" x="3" y="3" rx="1"/>
                                    <rect width="7" height="7" x="14" y="3" rx="1"/>
                                    <rect width="7" height="7" x="14" y="14" rx="1"/>
                                    <rect width="7" height="7" x="3" y="14" rx="1"/>
                                </svg>
                            </div>
                            <div class="dropdown-content">
                                <span class="dropdown-title">Accueil</span>
                                <span class="dropdown-desc">Toutes les vues utiles pour la bonne gestion de votre entreprise</span>
                            </div>
                        </a>
                        <a href="#" class="dropdown-item">
                            <div class="dropdown-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    <path d="M9 9h6v6H9z"/>
                                </svg>
                            </div>
                            <div class="dropdown-content">
                                <span class="dropdown-title">Sage <span class="ai-gradient">Ask.AI</span></span>
                                <span class="dropdown-desc">L'agent Web ou Mobile conversationnel du quotidien branch√© √† SAGE</span>
                            </div>
                        </a>
                        <a href="builder.html" class="dropdown-item">
                            <div class="dropdown-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z"/>
                                </svg>
                            </div>
                            <div class="dropdown-content">
                                <span class="dropdown-title">Sage <span class="ai-gradient">Builder.AI</span></span>
                                <span class="dropdown-desc">Construire par l'IA des vues web sur-mesure connect√©es √† SAGE</span>
                            </div>
                        </a>
                        <a href="workflow-start.html" class="dropdown-item active">
                            <div class="dropdown-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect width="8" height="8" x="3" y="3" rx="2"/>
                                    <path d="M7 11v4a2 2 0 0 0 2 2h4"/>
                                    <rect width="8" height="8" x="13" y="13" rx="2"/>
                                </svg>
                            </div>
                            <div class="dropdown-content">
                                <span class="dropdown-title">Sage <span class="ai-gradient">Workflow.AI</span></span>
                                <span class="dropdown-desc">Construire par l'IA des processus automatis√©s dans et avec SAGE</span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="lang-selector">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m5 8 6 6"/>
                        <path d="m4 14 6-6 2-3"/>
                        <path d="M2 5h12"/>
                        <path d="M7 2h1"/>
                        <path d="m22 22-5-10-5 10"/>
                        <path d="M14 18h6"/>
                    </svg>
                    <span class="flag-fr">üá´üá∑</span>
                    <span>FR</span>
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m6 9 6 6 6-6"/>
                    </svg>
                </div>
                <div class="user-menu-wrapper" id="userMenuWrapper">
                    <div class="user-menu" id="userMenuToggle">
                        <div class="user-avatar">AD</div>
                        <span class="user-name">Admin</span>
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="m6 9 6 6 6-6"/>
                        </svg>
                    </div>
                    <div class="user-menu-dropdown">
                        <div class="user-menu-header">
                            <div class="user-avatar">AD</div>
                            <div class="user-menu-info">
                                <span class="user-fullname">Admin</span>
                                <span class="user-email">admin@webexpr.dev</span>
                            </div>
                        </div>
                        <div class="user-menu-list">
                            <a href="#" class="user-menu-item">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                                Param√®tres du compte
                            </a>
                            <button class="user-menu-item" id="themeToggle">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="themeIcon">
                                    <circle cx="12" cy="12" r="4"/>
                                    <path d="M12 2v2"/>
                                    <path d="M12 20v2"/>
                                    <path d="m4.93 4.93 1.41 1.41"/>
                                    <path d="m17.66 17.66 1.41 1.41"/>
                                    <path d="M2 12h2"/>
                                    <path d="M20 12h2"/>
                                    <path d="m6.34 17.66-1.41 1.41"/>
                                    <path d="m19.07 4.93-1.41 1.41"/>
                                </svg>
                                <span id="themeLabel">Mode sombre</span>
                            </button>
                            <a href="#" class="user-menu-item logout">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                                    <polyline points="16 17 21 12 16 7"/>
                                    <line x1="21" x2="9" y1="12" y2="12"/>
                                </svg>
                                D√©connexion
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="main-wrapper">
            <!-- Left Sidebar - Workflows List -->
            <aside class="sidebar workflow-sidebar">
                <div class="sidebar-content">
                    <div class="sidebar-section">
                        <span class="section-label">Workflows</span>
                        <nav class="nav-menu">
                            <a href="#" class="nav-item active">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect width="8" height="8" x="3" y="3" rx="2"/>
                                    <path d="M7 11v4a2 2 0 0 0 2 2h4"/>
                                    <rect width="8" height="8" x="13" y="13" rx="2"/>
                                </svg>
                                Relance factures impay√©es
                            </a>
                            <a href="#" class="nav-item">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect width="8" height="8" x="3" y="3" rx="2"/>
                                    <path d="M7 11v4a2 2 0 0 0 2 2h4"/>
                                    <rect width="8" height="8" x="13" y="13" rx="2"/>
                                </svg>
                                Validation devis > 5000‚Ç¨
                            </a>
                            <a href="#" class="nav-item">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect width="8" height="8" x="3" y="3" rx="2"/>
                                    <path d="M7 11v4a2 2 0 0 0 2 2h4"/>
                                    <rect width="8" height="8" x="13" y="13" rx="2"/>
                                </svg>
                                Alerte stock minimum
                            </a>
                            <a href="#" class="nav-item">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect width="8" height="8" x="3" y="3" rx="2"/>
                                    <path d="M7 11v4a2 2 0 0 0 2 2h4"/>
                                    <rect width="8" height="8" x="13" y="13" rx="2"/>
                                </svg>
                                Approbation commandes
                            </a>
                        </nav>
                    </div>

                    <div class="sidebar-section">
                        <span class="section-label muted">R√©cents</span>
                        <nav class="nav-menu">
                            <a href="#" class="nav-item">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                Rapport ventes hebdo
                            </a>
                            <a href="#" class="nav-item">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                Nouveau client notif.
                            </a>
                        </nav>
                    </div>
                </div>

                <div class="sidebar-footer">
                    <a href="#" class="nav-item settings-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                        Param√®tres
                        <svg class="chevron-down" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m6 9 6 6 6-6"/>
                        </svg>
                    </a>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content workflow-main">
                <!-- Sub Header / Breadcrumb -->
                <div class="sub-header workflow-subheader">
                    <div class="sub-header-left">
                        <button class="back-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m12 19-7-7 7-7"/>
                                <path d="M19 12H5"/>
                            </svg>
                        </button>
                        <div class="breadcrumb">
                            <a href="#" class="breadcrumb-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/>
                                    <path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                                </svg>
                                Home
                            </a>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="m9 18 6-6-6-6"/>
                            </svg>
                            <span class="breadcrumb-current">Relance automatique des factures impay√©es</span>
                        </div>
                    </div>
                    <div class="sub-header-right">
                        <div class="workflow-actions">
                            <button class="action-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="4" x2="20" y1="12" y2="12"/>
                                    <line x1="4" x2="20" y1="6" y2="6"/>
                                    <line x1="4" x2="20" y1="18" y2="18"/>
                                </svg>
                                Actions
                            </button>
                            <button class="action-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Affichage
                            </button>
                            <button class="action-btn primary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="18" cy="5" r="3"/>
                                    <circle cx="6" cy="12" r="3"/>
                                    <circle cx="18" cy="19" r="3"/>
                                    <line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/>
                                    <line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/>
                                </svg>
                                Partager
                            </button>
                            <button class="action-btn primary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="6 3 20 12 6 21 6 3"/>
                                </svg>
                                Ex√©cuter
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Content Area -->
                <div class="content-area workflow-content">
                    <!-- AI Chat Panel -->
                    <div class="chat-panel workflow-chat">
                        <div class="chat-header">
                            <button class="clear-btn">
                                <!-- Trash2 (Lucide) -->
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M10 11v6"/>
                                    <path d="M14 11v6"/>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/>
                                    <path d="M3 6h18"/>
                                    <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                                Effacer
                            </button>
                        </div>
                        <div class="chat-messages" id="chatMessages">
                            <!-- Messages will be added dynamically -->
                        </div>

                        <!-- Chat Input -->
                        <div class="chat-input-area">
                            <div class="chat-input-container">
                                <button class="attach-btn">
                                    <!-- Image Plus (Lucide) -->
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M16 5h6"/>
                                        <path d="M19 2v6"/>
                                        <path d="M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5"/>
                                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                                        <circle cx="9" cy="9" r="2"/>
                                    </svg>
                                </button>
                                <div class="chat-input-wrapper">
                                    <input type="text" placeholder="D√©crivez le workflow souhait√©..." class="chat-input" id="chatInput" value="Je veux automatiser la relance des factures impay√©es √† 30 jours avec validation du commercial">
                                </div>
                                <button class="send-btn" id="sendBtn">
                                    <!-- Send (Lucide) -->
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/>
                                        <path d="m21.854 2.147-10.94 10.939"/>
                                    </svg>
                                </button>
                            </div>
                            <span class="input-hint">Glissez-d√©posez des images ou cliquez sur l'ic√¥ne image</span>
                        </div>
                    </div>

                    <!-- Workflow Canvas -->
                    <div class="preview-panel workflow-canvas-panel">
                        <!-- Empty State -->
                        <div class="workflow-empty-state" id="workflowEmpty">
                            <div class="empty-workflow-icon">
                                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#9CA3AF" stroke-width="1">
                                    <rect width="8" height="8" x="3" y="3" rx="2"/>
                                    <path d="M7 11v4a2 2 0 0 0 2 2h4"/>
                                    <rect width="8" height="8" x="13" y="13" rx="2"/>
                                </svg>
                            </div>
                            <h3>D√©crivez votre workflow</h3>
                            <p>Utilisez le chat pour d√©crire le processus que vous souhaitez automatiser. L'IA g√©n√©rera le workflow correspondant.</p>
                        </div>

                        <!-- Completed Workflow (hidden by default) -->
                        <div class="workflow-canvas-grid" id="workflowCanvas" style="display: none;">
                            <!-- SVG Connectors Layer -->
                            <svg class="workflow-connectors" width="100%" height="100%">
                                <defs>
                                    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                                        <polygon points="0 0, 8 3, 0 6" fill="#9CA3AF"/>
                                    </marker>
                                </defs>

                                <!-- Start to Condition -->
                                <path d="M 200 75 L 200 110" stroke="#9CA3AF" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

                                <!-- Condition to Yes branch (L-shaped: down then right) -->
                                <path d="M 200 170 L 200 240 L 395 240" stroke="#9CA3AF" stroke-width="1.5" fill="none"/>
                                <!-- Yes arrow to Create Record -->
                                <path d="M 465 240 L 520 240" stroke="#9CA3AF" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

                                <!-- Condition to No branch (straight down) -->
                                <path d="M 200 170 L 200 320" stroke="#9CA3AF" stroke-width="1.5" fill="none"/>
                                <!-- No arrow to First step -->
                                <path d="M 200 370 L 200 430" stroke="#9CA3AF" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

                                <!-- Create Record to Approbation -->
                                <path d="M 620 280 L 620 320" stroke="#9CA3AF" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

                                <!-- Approbation to New step here -->
                                <path d="M 620 390 L 620 430" stroke="#9CA3AF" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

                                <!-- First step to Workflow completed -->
                                <path d="M 200 500 L 200 540" stroke="#9CA3AF" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

                                <!-- New step here to Workflow completed (L-shape going down then left) -->
                                <path d="M 620 495 L 620 580 L 310 580" stroke="#9CA3AF" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>
                            </svg>

                            <!-- Nodes Layer -->
                            <!-- Start Node -->
                            <div class="wf-node wf-start" style="left: 80px; top: 30px;">
                                <div class="wf-node-icon start">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                                    </svg>
                                </div>
                                <span>Facture √©chue 30j</span>
                            </div>

                            <!-- Condition Node -->
                            <div class="wf-node wf-condition" style="left: 80px; top: 120px;">
                                <div class="wf-node-icon condition">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="3"/>
                                        <path d="M3 12h6"/>
                                        <path d="M15 12h6"/>
                                        <path d="M12 3v6"/>
                                        <path d="M12 15v6"/>
                                    </svg>
                                </div>
                                <span>Montant > 500‚Ç¨</span>
                            </div>

                            <!-- Yes Label (on the horizontal line) -->
                            <div class="wf-branch-label yes" style="left: 430px; top: 222px; transform: translateX(-50%);">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                Oui
                            </div>

                            <!-- No Label (on the vertical line) -->
                            <div class="wf-branch-label no" style="left: 200px; top: 330px; transform: translateX(-50%);">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <path d="M18 6 6 18"/>
                                    <path d="m6 6 12 12"/>
                                </svg>
                                Non
                            </div>

                            <!-- Notify Commercial Node -->
                            <div class="wf-node wf-action" style="left: 530px; top: 215px;">
                                <div class="wf-node-icon action">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                        <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
                                    </svg>
                                </div>
                                <span>Notifier commercial</span>
                            </div>

                            <!-- Approbation Node -->
                            <div class="wf-node wf-action" style="left: 530px; top: 330px;">
                                <div class="wf-node-icon approval">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect width="18" height="18" x="3" y="3" rx="2"/>
                                        <path d="m9 12 2 2 4-4"/>
                                    </svg>
                                </div>
                                <span>Approbation envoi</span>
                            </div>

                            <!-- New Step Placeholder (Yes branch) -->
                            <div class="wf-node wf-placeholder" style="left: 530px; top: 445px;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14"/>
                                    <path d="M5 12h14"/>
                                </svg>
                                <span>Nouvelle √©tape</span>
                            </div>

                            <!-- First Step Placeholder (No branch) -->
                            <div class="wf-node wf-placeholder" style="left: 80px; top: 445px;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14"/>
                                    <path d="M5 12h14"/>
                                </svg>
                                <span>Premi√®re √©tape</span>
                            </div>

                            <!-- End Node -->
                            <div class="wf-node wf-end" style="left: 80px; top: 555px;">
                                <div class="wf-node-icon end">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="20 6 9 17 4 12"/>
                                    </svg>
                                </div>
                                <span>Relance envoy√©e</span>
                            </div>

                            <!-- Add Element Dropdown Menu -->
                            <div class="add-element-dropdown" id="addElementDropdown">
                                <div class="add-element-header">Ajouter une √©tape</div>
                                <div class="add-element-list">
                                    <a href="#" class="add-element-item">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8B5CF6" stroke-width="2">
                                            <circle cx="12" cy="12" r="3"/>
                                            <path d="M3 12h6"/>
                                            <path d="M15 12h6"/>
                                            <path d="M12 3v6"/>
                                            <path d="M12 15v6"/>
                                        </svg>
                                        <span>Conditions</span>
                                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m9 18 6-6-6-6"/>
                                        </svg>
                                    </a>
                                    <a href="#" class="add-element-item">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                                            <rect width="18" height="18" x="3" y="3" rx="2"/>
                                            <path d="m9 12 2 2 4-4"/>
                                        </svg>
                                        <span>Approbations</span>
                                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m9 18 6-6-6-6"/>
                                        </svg>
                                    </a>
                                    <a href="#" class="add-element-item">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2">
                                            <rect width="20" height="16" x="2" y="4" rx="2"/>
                                            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                                        </svg>
                                        <span>Notifications</span>
                                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m9 18 6-6-6-6"/>
                                        </svg>
                                    </a>
                                    <a href="#" class="add-element-item">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#00D639" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                            <polyline points="14 2 14 8 20 8"/>
                                            <line x1="16" y1="13" x2="8" y2="13"/>
                                            <line x1="16" y1="17" x2="8" y2="17"/>
                                        </svg>
                                        <span>Documents Sage</span>
                                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m9 18 6-6-6-6"/>
                                        </svg>
                                    </a>
                                    <div class="add-element-item has-submenu">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                            <ellipse cx="12" cy="5" rx="9" ry="3"/>
                                            <path d="M3 5V19A9 3 0 0 0 21 19V5"/>
                                            <path d="M3 12A9 3 0 0 0 21 12"/>
                                        </svg>
                                        <span>Donn√©es Sage 100</span>
                                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m9 18 6-6-6-6"/>
                                        </svg>
                                        <!-- Submenu Donn√©es Sage 100 -->
                                        <div class="add-element-submenu">
                                            <!-- Clients -->
                                            <div class="submenu-item has-submenu">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                                                    <circle cx="9" cy="7" r="4"/>
                                                </svg>
                                                <span>Clients</span>
                                                <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="m9 18 6-6-6-6"/>
                                                </svg>
                                                <div class="actions-submenu">
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                                                            <path d="M12 5v14"/><path d="M5 12h14"/>
                                                        </svg>
                                                        Cr√©er un client
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2">
                                                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                        </svg>
                                                        Rechercher un client
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
                                                        </svg>
                                                        Mettre √† jour un client
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#EF4444" stroke-width="2">
                                                            <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                                                        </svg>
                                                        Supprimer un client
                                                    </a>
                                                </div>
                                            </div>
                                            <!-- Fournisseurs -->
                                            <div class="submenu-item has-submenu">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                                                    <circle cx="9" cy="7" r="4"/>
                                                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                                </svg>
                                                <span>Fournisseurs</span>
                                                <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="m9 18 6-6-6-6"/>
                                                </svg>
                                                <div class="actions-submenu">
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                                                            <path d="M12 5v14"/><path d="M5 12h14"/>
                                                        </svg>
                                                        Cr√©er un fournisseur
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2">
                                                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                        </svg>
                                                        Rechercher un fournisseur
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
                                                        </svg>
                                                        Mettre √† jour un fournisseur
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#EF4444" stroke-width="2">
                                                            <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                                                        </svg>
                                                        Supprimer un fournisseur
                                                    </a>
                                                </div>
                                            </div>
                                            <!-- Factures -->
                                            <div class="submenu-item has-submenu">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                                    <polyline points="14 2 14 8 20 8"/>
                                                    <line x1="16" y1="13" x2="8" y2="13"/>
                                                    <line x1="16" y1="17" x2="8" y2="17"/>
                                                </svg>
                                                <span>Factures</span>
                                                <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="m9 18 6-6-6-6"/>
                                                </svg>
                                                <div class="actions-submenu">
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                                                            <path d="M12 5v14"/><path d="M5 12h14"/>
                                                        </svg>
                                                        Cr√©er une facture
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2">
                                                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                        </svg>
                                                        Rechercher une facture
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
                                                        </svg>
                                                        Modifier une facture
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#8B5CF6" stroke-width="2">
                                                            <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
                                                        </svg>
                                                        Valider une facture
                                                    </a>
                                                </div>
                                            </div>
                                            <!-- Commandes -->
                                            <div class="submenu-item has-submenu">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                                                    <path d="M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"/>
                                                    <path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/>
                                                </svg>
                                                <span>Commandes</span>
                                                <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="m9 18 6-6-6-6"/>
                                                </svg>
                                                <div class="actions-submenu">
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                                                            <path d="M12 5v14"/><path d="M5 12h14"/>
                                                        </svg>
                                                        Cr√©er une commande
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2">
                                                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                        </svg>
                                                        Rechercher une commande
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#8B5CF6" stroke-width="2">
                                                            <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
                                                        </svg>
                                                        Valider une commande
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#EF4444" stroke-width="2">
                                                            <circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/>
                                                        </svg>
                                                        Annuler une commande
                                                    </a>
                                                </div>
                                            </div>
                                            <!-- R√®glements -->
                                            <div class="submenu-item has-submenu">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                    <rect width="20" height="14" x="2" y="5" rx="2"/>
                                                    <line x1="2" x2="22" y1="10" y2="10"/>
                                                </svg>
                                                <span>R√®glements</span>
                                                <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="m9 18 6-6-6-6"/>
                                                </svg>
                                                <div class="actions-submenu">
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                                                            <path d="M12 5v14"/><path d="M5 12h14"/>
                                                        </svg>
                                                        Cr√©er un r√®glement
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2">
                                                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                        </svg>
                                                        Rechercher un r√®glement
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#8B5CF6" stroke-width="2">
                                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                                            <polyline points="22 4 12 14.01 9 11.01"/>
                                                        </svg>
                                                        Lettrer un r√®glement
                                                    </a>
                                                </div>
                                            </div>
                                            <!-- √âcritures comptables -->
                                            <div class="submenu-item has-submenu">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                    <path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"/>
                                                    <path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/>
                                                    <path d="M12 17.5v-11"/>
                                                </svg>
                                                <span>√âcritures comptables</span>
                                                <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="m9 18 6-6-6-6"/>
                                                </svg>
                                                <div class="actions-submenu">
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                                                            <path d="M12 5v14"/><path d="M5 12h14"/>
                                                        </svg>
                                                        Cr√©er une √©criture
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2">
                                                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                        </svg>
                                                        Rechercher une √©criture
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#8B5CF6" stroke-width="2">
                                                            <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
                                                        </svg>
                                                        Valider une √©criture
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                            <path d="M3 3v18h18"/>
                                                            <path d="m19 9-5 5-4-4-3 3"/>
                                                        </svg>
                                                        G√©n√©rer un extourne
                                                    </a>
                                                </div>
                                            </div>
                                            <!-- Articles -->
                                            <div class="submenu-item has-submenu">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                    <path d="m7.5 4.27 9 5.15"/>
                                                    <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
                                                    <path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/>
                                                </svg>
                                                <span>Articles</span>
                                                <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="m9 18 6-6-6-6"/>
                                                </svg>
                                                <div class="actions-submenu">
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                                                            <path d="M12 5v14"/><path d="M5 12h14"/>
                                                        </svg>
                                                        Cr√©er un article
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2">
                                                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                        </svg>
                                                        Rechercher un article
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                                                            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
                                                        </svg>
                                                        Mettre √† jour un article
                                                    </a>
                                                    <a href="#" class="action-item">
                                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#0EA5E9" stroke-width="2">
                                                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                                            <polyline points="3.29 7 12 12 20.71 7"/>
                                                            <line x1="12" x2="12" y1="22" y2="12"/>
                                                        </svg>
                                                        Consulter le stock
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <a href="#" class="add-element-item">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#EC4899" stroke-width="2">
                                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                            <circle cx="9" cy="7" r="4"/>
                                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                        </svg>
                                        <span>Clients & Tiers</span>
                                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m9 18 6-6-6-6"/>
                                        </svg>
                                    </a>
                                    <a href="#" class="add-element-item">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#0EA5E9" stroke-width="2">
                                            <path d="m7.5 4.27 9 5.15"/>
                                            <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
                                            <path d="m3.3 7 8.7 5 8.7-5"/>
                                            <path d="M12 22V12"/>
                                        </svg>
                                        <span>Stock & Articles</span>
                                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m9 18 6-6-6-6"/>
                                        </svg>
                                    </a>
                                    <a href="#" class="add-element-item">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#6366F1" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <polyline points="12 6 12 12 16 14"/>
                                        </svg>
                                        <span>D√©lais & Attentes</span>
                                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m9 18 6-6-6-6"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // App Switcher Dropdown toggle
        document.getElementById('appSwitcher').addEventListener('click', function(e) {
            e.stopPropagation();
            this.classList.toggle('open');
            document.getElementById('userMenuWrapper').classList.remove('open');
        });

        // User menu dropdown toggle
        document.getElementById('userMenuToggle').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('userMenuWrapper').classList.toggle('open');
            document.getElementById('appSwitcher').classList.remove('open');
        });

        // Add Element Dropdown for placeholder nodes
        const placeholderNodes = document.querySelectorAll('.wf-placeholder');
        const addElementDropdown = document.getElementById('addElementDropdown');

        placeholderNodes.forEach(node => {
            node.style.cursor = 'pointer';
            node.addEventListener('click', function(e) {
                e.stopPropagation();
                const rect = this.getBoundingClientRect();
                const canvas = document.querySelector('.workflow-canvas-grid');
                const canvasRect = canvas.getBoundingClientRect();

                addElementDropdown.style.left = (rect.right - canvasRect.left + 10) + 'px';
                // Align bottom of dropdown with bottom of button
                const dropdownHeight = addElementDropdown.offsetHeight || 400;
                addElementDropdown.style.top = (rect.bottom - canvasRect.top - dropdownHeight) + 'px';
                addElementDropdown.classList.toggle('open');
            });
        });

        document.addEventListener('click', function() {
            document.getElementById('appSwitcher').classList.remove('open');
            document.getElementById('userMenuWrapper').classList.remove('open');
            addElementDropdown.classList.remove('open');
        });

        // Dark mode toggle
        const themeToggle = document.getElementById('themeToggle');
        const themeLabel = document.getElementById('themeLabel');
        const themeIcon = document.getElementById('themeIcon');

        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeUI(savedTheme);

        themeToggle.addEventListener('click', function(e) {
            e.preventDefault();
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeUI(newTheme);
        });

        function updateThemeUI(theme) {
            if (theme === 'dark') {
                themeLabel.textContent = 'Mode clair';
                themeIcon.innerHTML = '<circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/>';
            } else {
                themeLabel.textContent = 'Mode sombre';
                themeIcon.innerHTML = '<path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>';
            }
        }

        // ===================================
        // WORKFLOW AI SIMULATION
        // ===================================
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const workflowEmpty = document.getElementById('workflowEmpty');
        const workflowCanvas = document.getElementById('workflowCanvas');

        let simulationStep = 0;

        function getCurrentTime() {
            const now = new Date();
            return now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
        }

        function addUserMessage(text) {
            const messageHTML = `
                <div class="message user-message">
                    <div class="message-content">
                        <p>${text}</p>
                        <span class="message-time">${getCurrentTime()}</span>
                    </div>
                    <div class="message-avatar user">AD</div>
                </div>
            `;
            chatMessages.insertAdjacentHTML('beforeend', messageHTML);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addAIThinking() {
            const thinkingHTML = `
                <div class="message ai-message ai-thinking" id="aiThinking">
                    <div class="message-avatar ai">S</div>
                    <div class="message-content thinking-content">
                        <div class="thinking-header">
                            <div class="thinking-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="m21 21-4.3-4.3"/>
                                </svg>
                            </div>
                            <span class="thinking-text">Analyse de votre demande...</span>
                            <div class="thinking-spinner"></div>
                        </div>
                        <div class="thinking-steps">
                            <div class="thinking-step active">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="m21 21-4.3-4.3"/>
                                </svg>
                            </div>
                            <div class="thinking-line"></div>
                            <div class="thinking-step">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                                </svg>
                            </div>
                            <div class="thinking-line"></div>
                            <div class="thinking-step">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect width="8" height="8" x="3" y="3" rx="2"/>
                                    <path d="M7 11v4a2 2 0 0 0 2 2h4"/>
                                    <rect width="8" height="8" x="13" y="13" rx="2"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            chatMessages.insertAdjacentHTML('beforeend', thinkingHTML);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Animate steps
            setTimeout(() => {
                document.querySelectorAll('.thinking-step')[1].classList.add('active');
                document.querySelector('.thinking-text').textContent = 'Lecture des r√®gles m√©tier...';
            }, 2500);

            setTimeout(() => {
                document.querySelectorAll('.thinking-step')[2].classList.add('active');
                document.querySelector('.thinking-text').textContent = 'G√©n√©ration du workflow...';
            }, 5000);
        }

        function removeAIThinking() {
            const thinking = document.getElementById('aiThinking');
            if (thinking) {
                thinking.remove();
            }
        }

        function addAIResponse() {
            const responseHTML = `
                <div class="message ai-message">
                    <div class="message-avatar ai">S</div>
                    <div class="message-content">
                        <p>Voici votre workflow de relance factures !</p>
                        <p>Le processus comprend :</p>
                        <ol>
                            <li><strong>D√©clencheur</strong> - Facture √©chue depuis 30 jours</li>
                            <li><strong>Condition</strong> - Montant > 500‚Ç¨</li>
                            <li><strong>Notification</strong> - Alerte au commercial</li>
                            <li><strong>Approbation</strong> - Validation avant envoi</li>
                            <li><strong>Action</strong> - Envoi email de relance</li>
                        </ol>
                    </div>
                </div>
            `;
            chatMessages.insertAdjacentHTML('beforeend', responseHTML);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showWorkflow() {
            workflowEmpty.style.display = 'none';
            workflowCanvas.style.display = 'block';
        }

        sendBtn.addEventListener('click', function() {
            if (simulationStep === 0 && chatInput.value.trim()) {
                // Step 1: Show user message
                addUserMessage(chatInput.value);
                chatInput.value = '';
                simulationStep = 1;

                // Step 2: Show AI thinking after a short delay
                setTimeout(() => {
                    addAIThinking();
                }, 500);

                // Step 3: Remove thinking and show response
                setTimeout(() => {
                    removeAIThinking();
                    addAIResponse();
                    showWorkflow();
                    simulationStep = 2;
                }, 7500);
            }
        });

        // Also trigger on Enter key
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendBtn.click();
            }
        });
    </script>
</body>
</html>
